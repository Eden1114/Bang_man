{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\enemy-generator.js"],"names":["cc","Class","extends","Component","properties","enemyPrefabArray","Prefab","time","num","_currentTime","ground","Node","_sceneLoading","onLoad","window","enemyNum","schedule","generator","bind","director","loadScene","i","enemyIdx","Math","floor","random","length","enemy","instantiate","randomPosition","v2","round","random0To1","addChild","name","Date","now","position"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,0BAAkB,CAACL,GAAGM,MAAJ,CADV;AAERC,cAAM,EAFE;AAGRC,aAAK,CAHG;AAIRC,sBAAc,CAJN;AAKRC,gBAAQV,GAAGW,IALH;AAMRC,uBAAe;AANP,KAHP;;AAYLC,YAAQ,kBAAY;AAChBC,eAAOC,QAAP,GAAkB,CAAlB;AACA,aAAKC,QAAL,CAAc,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAd,EAAyC,CAAzC;AACH,KAfI;;AAiBLD,eAAW,qBAAY;AACnB,YAAIH,OAAOC,QAAP,IAAmB,CAAvB,EAA0B;;AAEtB;AACA,gBAAI,KAAKN,YAAL,IAAqB,KAAKF,IAA9B,EAAoC;AAChC,oBAAI,CAAC,KAAKK,aAAV,EAAyB;AACrB,yBAAKA,aAAL,GAAqB,IAArB;AACAZ,uBAAGmB,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACA;AACH;AACJ;;AAED;AARA,iBASK;AACD,wBAAIL,WAAW,KAAKP,GAAL,GAAW,KAAKC,YAAhB,GAA+B,CAA9C;;AAEA,yBAAK,IAAIY,IAAI,CAAb,EAAgBA,IAAIN,QAApB,EAA8BM,GAA9B,EAAmC;AAC/B,4BAAIC,WAAWC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,KAAKpB,gBAAL,CAAsBqB,MAAjD,CAAf;AACA,4BAAIC,QAAQ3B,GAAG4B,WAAH,CAAe,KAAKvB,gBAAL,CAAsBiB,QAAtB,CAAf,CAAZ;AACA,4BAAIO,iBAAiB,IAArB;;AAEA;AACA,4BAAIN,KAAKE,MAAL,KAAgB,GAApB,EAAyB;AACrBI,6CAAiB7B,GAAG8B,EAAH,CAAMP,KAAKQ,KAAL,CAAW/B,GAAGgC,UAAH,KAAkB,GAA7B,IAAkC,CAAxC,EAA2ChC,GAAGgC,UAAH,KAAkB,GAAlB,GAAwB,EAAnE,CAAjB;AACH,yBAFD,MAEO;AACHH,6CAAiB7B,GAAG8B,EAAH,CAAM9B,GAAGgC,UAAH,KAAkB,GAAlB,GAAwB,CAA9B,EAAiCT,KAAKQ,KAAL,CAAW/B,GAAGgC,UAAH,EAAX,IAA8B,GAA9B,GAAoC,EAArE,CAAjB;AACH;;AAED,6BAAKtB,MAAL,CAAYuB,QAAZ,CAAqBN,KAArB;AACAA,8BAAMO,IAAN,GAAa,UAAUC,KAAKC,GAAL,EAAvB;AACAT,8BAAMU,QAAN,GAAiBR,cAAjB;AACAf,+BAAOC,QAAP;AACH;;AAED,yBAAKN,YAAL;AACH;AACJ;AACJ;AAtDI,CAAT","file":"enemy-generator.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["/**生成敌人的脚本 */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        enemyPrefabArray: [cc.Prefab],\r\n        time: 10,\r\n        num: 1,\r\n        _currentTime: 1,\r\n        ground: cc.Node,\r\n        _sceneLoading: false,\r\n    },\r\n\r\n    onLoad: function () {\r\n        window.enemyNum = 0;\r\n        this.schedule(this.generator.bind(this), 1);\r\n    },\r\n\r\n    generator: function () {\r\n        if (window.enemyNum == 0) {\r\n\r\n            //结束所有轮游戏，进入胜利界面\r\n            if (this._currentTime == this.time) {\r\n                if (!this._sceneLoading) {\r\n                    this._sceneLoading = true;\r\n                    cc.director.loadScene('win-scene');\r\n                    return;\r\n                }\r\n            }\r\n\r\n            //进入下一轮，添加敌人\r\n            else {\r\n                let enemyNum = this.num * this._currentTime + 3;\r\n\r\n                for (let i = 0; i < enemyNum; i++) {\r\n                    let enemyIdx = Math.floor(Math.random() * this.enemyPrefabArray.length);\r\n                    let enemy = cc.instantiate(this.enemyPrefabArray[enemyIdx]);\r\n                    let randomPosition = null;\r\n\r\n                    //enemy的生成位置\r\n                    if (Math.random() > 0.5) {\r\n                        randomPosition = cc.v2(Math.round(cc.random0To1() * 950)+5, cc.random0To1() * 500 + 20);\r\n                    } else {\r\n                        randomPosition = cc.v2(cc.random0To1() * 950 + 5, Math.round(cc.random0To1()) * 500 + 20);\r\n                    }\r\n\r\n                    this.ground.addChild(enemy);\r\n                    enemy.name = 'enemy' + Date.now();\r\n                    enemy.position = randomPosition;\r\n                    window.enemyNum++;\r\n                }\r\n\r\n                this._currentTime++;\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}