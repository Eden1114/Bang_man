{"version":3,"sources":["enemy-generator.js"],"names":["cc","Class","extends","Component","properties","enemyPrefabArray","Prefab","time","num","_currentTime","ground","Node","_sceneLoading","onLoad","window","enemyNum","schedule","generator","bind","director","loadScene","i","enemyIdx","Math","floor","random","length","enemy","instantiate","randomPosition","v2","round","random0To1","addChild","name","Date","now","position"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACT;AACAC,0BAAkB,CAACL,GAAGM,MAAJ,CAFT;AAGTC,cAAM,EAHG;AAITC,aAAK,CAJI;AAKTC,sBAAc,CALL;AAMTC,gBAAQV,GAAGW,IANF;AAOTC,uBAAe;AAPN,KAHP;;AAaLC,YAAQ,kBAAY;AAChBC,eAAOC,QAAP,GAAkB,CAAlB;AACA;AACA,aAAKC,QAAL,CAAc,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAd,EAAwC,CAAxC;AACH,KAjBI;;AAmBLD,eAAW,qBAAU;AACjB,YAAGH,OAAOC,QAAP,IAAmB,CAAtB,EAAwB;AACpB,gBAAG,KAAKN,YAAL,IAAqB,KAAKF,IAA7B,EAAkC;AAC9B,oBAAG,CAAC,KAAKK,aAAT,EAAuB;AACnB,yBAAKA,aAAL,GAAqB,IAArB;AACAZ,uBAAGmB,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACA;AACH;AACJ;AACD,gBAAIL,WAAW,KAAKP,GAAL,GAAW,KAAKC,YAA/B;AACA,iBAAI,IAAIY,IAAI,CAAZ,EAAeA,IAAIN,QAAnB,EAA6BM,GAA7B,EAAiC;AAC7B,oBAAIC,WAAWC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,KAAKpB,gBAAL,CAAsBqB,MAAjD,CAAf;AACA,oBAAIC,QAAQ3B,GAAG4B,WAAH,CAAe,KAAKvB,gBAAL,CAAsBiB,QAAtB,CAAf,CAAZ;AACA,oBAAIO,iBAAiB,IAArB;AACA,oBAAGN,KAAKE,MAAL,KAAgB,GAAnB,EAAuB;AACnBI,qCAAiB7B,GAAG8B,EAAH,CAAMP,KAAKQ,KAAL,CAAW/B,GAAGgC,UAAH,KAAkB,GAA7B,CAAN,EAAwChC,GAAGgC,UAAH,KAAkB,GAA1D,CAAjB;AACH,iBAFD,MAEK;AACDH,qCAAiB7B,GAAG8B,EAAH,CAAM9B,GAAGgC,UAAH,KAAkB,GAAxB,EAA4BT,KAAKQ,KAAL,CAAW/B,GAAGgC,UAAH,EAAX,IAA8B,GAA1D,CAAjB;AACH;AACD,qBAAKtB,MAAL,CAAYuB,QAAZ,CAAqBN,KAArB;AACAA,sBAAMO,IAAN,GAAa,UAAUC,KAAKC,GAAL,EAAvB;AACAT,sBAAMU,QAAN,GAAiBR,cAAjB;AACAf,uBAAOC,QAAP;AACH;AACD,iBAAKN,YAAL;AACH;AAGJ;;AA/CI,CAAT","file":"enemy-generator.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       //enemyPrefab: cc.Prefab,\r\n       enemyPrefabArray: [cc.Prefab],\r\n       time: 10,\r\n       num: 1,\r\n       _currentTime: 1,\r\n       ground: cc.Node,\r\n       _sceneLoading: false,\r\n    },\r\n\r\n    onLoad: function () {\r\n        window.enemyNum = 0;\r\n        //this.generator();\r\n        this.schedule(this.generator.bind(this),1);\r\n    },\r\n\r\n    generator: function(){\r\n        if(window.enemyNum == 0){\r\n            if(this._currentTime == this.time){\r\n                if(!this._sceneLoading){\r\n                    this._sceneLoading = true;\r\n                    cc.director.loadScene('win-scene');\r\n                    return ;\r\n                }\r\n            }  \r\n            let enemyNum = this.num * this._currentTime;\r\n            for(let i = 0; i < enemyNum; i++){\r\n                let enemyIdx = Math.floor(Math.random() * this.enemyPrefabArray.length);\r\n                let enemy = cc.instantiate(this.enemyPrefabArray[enemyIdx]);\r\n                let randomPosition = null;\r\n                if(Math.random() > 0.5){\r\n                    randomPosition = cc.v2(Math.round(cc.random0To1() * 950),cc.random0To1() * 530);\r\n                }else{\r\n                    randomPosition = cc.v2(cc.random0To1() * 950,Math.round(cc.random0To1()) * 530);\r\n                }\r\n                this.ground.addChild(enemy);\r\n                enemy.name = 'enemy' + Date.now();\r\n                enemy.position = randomPosition;\r\n                window.enemyNum++;\r\n            }\r\n            this._currentTime++;\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n});\r\n"]}