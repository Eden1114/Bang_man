{"version":3,"sources":["enemy-generator.js"],"names":["cc","Class","extends","Component","properties","enemyPrefabArray","Prefab","time","num","_currentTime","ground","Node","_sceneLoading","onLoad","window","enemyNum","schedule","generator","bind","director","loadScene","i","enemyIdx","Math","floor","random","length","enemy","instantiate","randomPosition","v2","round","random0To1","addChild","name","Date","now","position"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACT;AACAC,0BAAkB,CAACL,GAAGM,MAAJ,CAFT;AAGTC,cAAM,EAHG;AAITC,aAAK,CAJI;AAKTC,sBAAc,CALL;AAMTC,gBAAQV,GAAGW,IANF;AAOTC,uBAAe;AAPN,KAHP;;AAaLC,YAAQ,kBAAY;AAChBC,eAAOC,QAAP,GAAkB,CAAlB;AACA;AACA,aAAKC,QAAL,CAAc,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAd,EAAwC,CAAxC;AACH,KAjBI;;AAmBLD,eAAW,qBAAU;AACjB,YAAGH,OAAOC,QAAP,IAAmB,CAAtB,EAAwB;AACpB,gBAAG,KAAKN,YAAL,IAAqB,KAAKF,IAA7B,EAAkC;AAC9B,oBAAG,CAAC,KAAKK,aAAT,EAAuB;AACnB,yBAAKA,aAAL,GAAqB,IAArB;AACAZ,uBAAGmB,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACA;AACH;AACJ;AACD,gBAAIL,WAAW,KAAKP,GAAL,GAAW,KAAKC,YAA/B;AACA,iBAAI,IAAIY,IAAI,CAAZ,EAAeA,IAAIN,QAAnB,EAA6BM,GAA7B,EAAiC;AAC7B,oBAAIC,WAAWC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,KAAKpB,gBAAL,CAAsBqB,MAAjD,CAAf;AACA,oBAAIC,QAAQ3B,GAAG4B,WAAH,CAAe,KAAKvB,gBAAL,CAAsBiB,QAAtB,CAAf,CAAZ;AACA,oBAAIO,iBAAiB,IAArB;AACA,oBAAGN,KAAKE,MAAL,KAAgB,GAAnB,EAAuB;AACnBI,qCAAiB7B,GAAG8B,EAAH,CAAMP,KAAKQ,KAAL,CAAW/B,GAAGgC,UAAH,KAAkB,GAA7B,CAAN,EAAwChC,GAAGgC,UAAH,KAAkB,GAA1D,CAAjB;AACH,iBAFD,MAEK;AACDH,qCAAiB7B,GAAG8B,EAAH,CAAM9B,GAAGgC,UAAH,KAAkB,GAAxB,EAA4BT,KAAKQ,KAAL,CAAW/B,GAAGgC,UAAH,EAAX,IAA8B,GAA1D,CAAjB;AACH;AACD,qBAAKtB,MAAL,CAAYuB,QAAZ,CAAqBN,KAArB;AACAA,sBAAMO,IAAN,GAAa,UAAUC,KAAKC,GAAL,EAAvB;AACAT,sBAAMU,QAAN,GAAiBR,cAAjB;AACAf,uBAAOC,QAAP;AACH;AACD,iBAAKN,YAAL;AACH;AAGJ;;AA/CI,CAAT","file":"enemy-generator.js","sourceRoot":"../../../../assets/script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n       //enemyPrefab: cc.Prefab,\n       enemyPrefabArray: [cc.Prefab],\n       time: 10,\n       num: 1,\n       _currentTime: 1,\n       ground: cc.Node,\n       _sceneLoading: false,\n    },\n\n    onLoad: function () {\n        window.enemyNum = 0;\n        //this.generator();\n        this.schedule(this.generator.bind(this),1);\n    },\n\n    generator: function(){\n        if(window.enemyNum == 0){\n            if(this._currentTime == this.time){\n                if(!this._sceneLoading){\n                    this._sceneLoading = true;\n                    cc.director.loadScene('win-scene');\n                    return ;\n                }\n            }  \n            let enemyNum = this.num * this._currentTime;\n            for(let i = 0; i < enemyNum; i++){\n                let enemyIdx = Math.floor(Math.random() * this.enemyPrefabArray.length);\n                let enemy = cc.instantiate(this.enemyPrefabArray[enemyIdx]);\n                let randomPosition = null;\n                if(Math.random() > 0.5){\n                    randomPosition = cc.v2(Math.round(cc.random0To1() * 960),cc.random0To1() * 640);\n                }else{\n                    randomPosition = cc.v2(cc.random0To1() * 960,Math.round(cc.random0To1()) * 640);\n                }\n                this.ground.addChild(enemy);\n                enemy.name = 'enemy' + Date.now();\n                enemy.position = randomPosition;\n                window.enemyNum++;\n            }\n            this._currentTime++;\n        }\n        \n        \n    }\n\n});\n"]}